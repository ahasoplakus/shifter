[
  {
    "objectID": "shift.html",
    "href": "shift.html",
    "title": "Creating a Shift Table in R",
    "section": "",
    "text": "Here is a workflow to create a Shift Table in R, using the {tidyverse} suite for data processing, and {gt} to build the desired table layout.",
    "crumbs": [
      "Shift Table in R"
    ]
  },
  {
    "objectID": "shift.html#required-packages",
    "href": "shift.html#required-packages",
    "title": "Creating a Shift Table in R",
    "section": "Required Packages",
    "text": "Required Packages\n\n\nCode\nsuppressPackageStartupMessages(library(dplyr))\nsuppressPackageStartupMessages(library(tidyr))\nsuppressPackageStartupMessages(library(rlang))\nsuppressPackageStartupMessages(library(purrr))\nsuppressPackageStartupMessages(library(stringr))\nsuppressPackageStartupMessages(library(gt))\nsuppressPackageStartupMessages(library(here))\n\n# some user defined functions are in the files below\nfiles &lt;- list.files(here(\"R\"), pattern = \".R\", full.names = TRUE)\n# Read all files\nwalk(files, source)",
    "crumbs": [
      "Shift Table in R"
    ]
  },
  {
    "objectID": "shift.html#data-used-for-analysis",
    "href": "shift.html#data-used-for-analysis",
    "title": "Creating a Shift Table in R",
    "section": "Data used for Analysis",
    "text": "Data used for Analysis\nWe will make use of the adsl and adlb test ADaM datasets from the {pharmaverseadam} R package for analysis.\n\nADSLADLB\n\n\nADSL is the analysis dataset for subject level\n\n\nCode\nadsl &lt;- pharmaverseadam::adsl\n\n\n\n\n\n\n\n\n\n\nADLB is the analysis dataset for Laboratory Records of subjects\n\n\nCode\nadlb &lt;- pharmaverseadam::adlb",
    "crumbs": [
      "Shift Table in R"
    ]
  },
  {
    "objectID": "shift.html#variables-used-for-analysis",
    "href": "shift.html#variables-used-for-analysis",
    "title": "Creating a Shift Table in R",
    "section": "Variables used for Analysis",
    "text": "Variables used for Analysis\n\nUSUBJID - Unique Subject Identifier\nSAFFL - Safety Population Flag\nTRT01A - Actual Treatment Arm for Period 01\nPARAM - Parameter\nPARAMCD - Parameter Code\nAVISIT - Analysis Visit\nAVISITN - Analysis Visit (Numeric)\nAVAL - Analysis Value\nANL01FL - Analysis Flag 01\nBNRIND - Baseline Reference Range Indicator\nANRIND - Analysis Reference Range Indicator",
    "crumbs": [
      "Shift Table in R"
    ]
  },
  {
    "objectID": "shift.html#programming-flow",
    "href": "shift.html#programming-flow",
    "title": "Creating a Shift Table in R",
    "section": "Programming Flow",
    "text": "Programming Flow\n\n1. Calculating BIG N (Treatment Totals)\n\nKeep only safety subjects (SAFFL == 'Y') in adsl\nCount number of subjects participating in each treatment group (TRT01A)\n\n\n\nCode\nadsl_bign &lt;- adsl |&gt;\n  na_to_missing() |&gt;\n  filter(.data$SAFFL == \"Y\") |&gt;\n  select(all_of(c(\"USUBJID\", \"TRT01A\"))) |&gt;\n  add_count(.data$TRT01A, name = \"TRT_N\")\n\n\n\n\n\n\n\n\n\n\n2. Preprocessing Lab Records\n\nMerge adsl_bign to adlb to add TRT_N\nFilter out missing values in Baseline Reference Range Indicator (BNRIND), Analysis Reference Range Indicator (ANRIND) and Analysis Value (AVAL)\nSubset the resulting data for subjects with post-does records where analysis flag is equal to 'Y'\nSubset data to keep lab records within the desired time period (eg. Week 2-Week 6)\nAdd BIG N to treatment labels by concatenating TRT_N with TRT01A\n\n\n\nCode\nadlb_prep &lt;- adlb |&gt;\n  na_to_missing() |&gt;\n  mutate(across(all_of(c(\"BNRIND\", \"ANRIND\")), str_to_title)) |&gt;\n  left_join(adsl_bign) |&gt;\n  filter(\n    .data$BNRIND != \"&lt;Missing&gt;\",\n    .data$ANRIND != \"&lt;Missing&gt;\",\n    !is.na(.data$AVAL),\n    .data$ANL01FL == \"Y\",\n    .data$AVISIT %in% c(\"Week 2\", \"Week 4\", \"Week 6\")\n  ) |&gt;\n  mutate(TRT_VAR = paste0(.data$TRT01A, \"&lt;br&gt;(N=\", .data$TRT_N, \")\")) |&gt;\n  select(-TRT_N)\n\n\n Subset adlb_prep to keep only Hemoglobin records \n\n\nCode\nadlb_hgb &lt;- adlb_prep |&gt;\n  filter(.data$PARAMCD == \"HGB\")\n\n\n\n\n\n\n\n\n\n\n3. Get all combinations of Range Indicator values\nCreate a dummy dataset that contains all possible combination of BNRIND and ANRIND values by Treatment and Visit.\n\n\nCode\ncomb_base_pbase &lt;- expand_grid(\n  TRT_VAR = unique(adlb_hgb[[\"TRT_VAR\"]]),\n  AVISIT = unique(adlb_hgb[[\"AVISIT\"]]),\n  BNRIND = c(\"Low\", \"Normal\", \"High\", \"Total\")\n) |&gt;\n  cross_join(tibble(ANRIND = c(\"Low\", \"Normal\", \"High\")))\n\n\n\n\n\n\n\n\n\n\n4. Performing Counts by Analysis Visit\n\n\nCode\nshift_counts &lt;- adlb_hgb |&gt;\n  bind_rows(mutate(adlb_hgb, BNRIND = \"Total\")) |&gt;\n  group_by(!!!syms(c(\"TRT_VAR\", \"AVISITN\", \"ANRIND\", \"BNRIND\"))) |&gt;\n  count(.data[[\"AVISIT\"]], name = \"CNT\") |&gt;\n  ungroup() |&gt;\n  # merge dummy dataset to get all combinations of `ANRIND` and `BNRIND` values\n  full_join(comb_base_pbase, by = c(\"TRT_VAR\", \"AVISIT\", \"BNRIND\", \"ANRIND\")) |&gt;\n  mutate(across(\"CNT\", ~ replace_na(.x, 0))) |&gt;\n  arrange(\n    .data[[\"TRT_VAR\"]],\n    factor(.data[[\"BNRIND\"]], levels = c(\"Low\", \"Normal\", \"High\", \"Total\"))\n  )\n\n\n\n\n\n\n\n\n\n\n5. Reshaping Data\n\nReshaping data to wide format to get the final Shift Table layout\nAdding Post-Baseline Grade Totals\n\n\n\nCode\nshift_wide &lt;- shift_counts |&gt;\n  pivot_wider(\n    id_cols = all_of(c(\"AVISIT\", \"ANRIND\")),\n    names_from = all_of(c(\"TRT_VAR\", \"BNRIND\")),\n    values_from = \"CNT\",\n    names_sep = \"^\"\n  )\n\npost_base_grade_totals &lt;- shift_wide |&gt;\n  summarize(across(where(is.numeric), sum), .by = all_of(\"AVISIT\")) |&gt;\n  mutate(ANRIND = \"Total\")\n\nvisit_levels &lt;-\n  arrange(filter(shift_counts, !is.na(.data$AVISITN)), by = .data$AVISITN) |&gt;\n  pull(.data$AVISIT) |&gt;\n  unique()\n\nshift_final &lt;- shift_wide |&gt;\n  bind_rows(post_base_grade_totals) |&gt;\n  arrange(\n    factor(.data$AVISIT, levels = visit_levels),\n    factor(.data$ANRIND, levels = c(\"Low\", \"Normal\", \"High\", \"Total\"))\n  )\n\n\nAn alternate and tidier approach would be to create a function say count_shifts() to cover Steps 3-5\n\n\nCode\nshift_final &lt;-\n  count_shifts(\n    bds_dataset = adlb_hgb,\n    trt_var = exprs(TRT_VAR),\n    analysis_grade_var = exprs(ANRIND),\n    base_grade_var = exprs(BNRIND),\n    grade_var_order = exprs(Low, Normal, High),\n    visit_var = exprs(AVISIT, AVISITN)\n  )\n\n\n\n\n\n\n\n\n\n\n6. Adding Percentages\n\n\nCode\ntrt_bign &lt;-\n  map(\n    set_names(unique(adsl_bign[[\"TRT01A\"]])),\n    \\(trt_val) get_trt_total(adsl_bign, exprs(TRT01A, TRT_N), trt_val)\n  )\n\nshift_final &lt;- shift_final |&gt;\n  add_pct2cols(\n    exclude_cols = exprs(AVISIT, ANRIND),\n    trt_bign = trt_bign\n  )\n\n\n\n\n\n\n\n\n\n\n7. Displaying the Final Table with {gt}\n\nSingle Parameter (Hemoglobin)Multiple Parameters\n\n\n\n\nCode\nout &lt;-\n  shift_final |&gt;\n  gt(groupname_col = \"AVISIT\", row_group_as_column = TRUE) |&gt;\n  cols_label_with(\n    columns = contains(\"ANRIND\"), \\(x) md(\"Reference&lt;br&gt;Range\")\n  ) |&gt;\n  tab_spanner_delim(delim = \"^\") |&gt;\n  text_transform(\n    fn = \\(x) map(x, \\(y) md(paste0(y, \"&lt;br&gt;Baseline&lt;br&gt;n (%)\"))),\n    locations = cells_column_spanners()\n  ) |&gt;\n  # headers and footers\n  tab_stubhead(md(\"Analysis Visit\")) |&gt;\n  tab_footnote(footnote = \"This is a footnote\") |&gt;\n  tab_header(\n    title = md(\n      \"Protocol: CDISCPILOT01&lt;br&gt;&lt;br&gt;Table x.x&lt;br&gt;Shift Table of Lab\n      Hematology&lt;br&gt;(Full Safety Analysis Set)\"\n    ),\n    subtitle = paste0(\"Parameter = \", unique(pull(adlb_hgb, \"PARAM\")))\n  ) |&gt;\n  # cell styling\n  tab_style(\n    style = cell_text(weight = \"bold\"),\n    locations = cells_body(columns = 2)\n  ) |&gt;\n  tab_style(\n    style = cell_text(align = \"center\"),\n    locations = cells_body(columns = -c(1, 2))\n  ) |&gt;\n  tab_style(\n    style = cell_text(align = \"center\"),\n    locations = cells_column_labels(columns = -c(1, 2))\n  ) |&gt;\n  # other options\n  tab_options(\n    table.background.color = \"white\",\n    table.font.names = \"monospace-slab-serif\",\n    row_group.font.weight = \"bold\",\n    column_labels.font.weight = \"bold\",\n    heading.title.font.weight = \"bold\",\n    heading.title.font.size = \"20px\",\n    heading.padding = \"10px\",\n    heading.subtitle.font.size = \"14px\"\n  ) |&gt;\n  opt_css(\n    css = \"\n    .gt_heading {\n      border-top-style: hidden !important;\n    }\n    .gt_table {\n      width: 135% !important;\n    }\n    .gt_subtitle {\n      text-align: left !important;\n      color: gray !important;\n    }\n    \"\n  )\nout\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nProtocol: CDISCPILOT01\n\nTable x.x\nShift Table of Lab Hematology\n(Full Safety Analysis Set)\n\n\nParameter = Hemoglobin (mmol/L)\n\n\nAnalysis Visit\nReference\nRange\nPlacebo\n(N=86)\nBaseline\nn (%)\nXanomeline High Dose\n(N=72)\nBaseline\nn (%)\nXanomeline Low Dose\n(N=96)\nBaseline\nn (%)\n\n\nLow\nNormal\nHigh\nTotal\nLow\nNormal\nHigh\nTotal\nLow\nNormal\nHigh\nTotal\n\n\n\n\nWeek 2\nLow\n4 (4.7%)\n2 (2.3%)\n0\n6 (7%)\n1 (1.4%)\n3 (4.2%)\n0\n4 (5.6%)\n4 (4.2%)\n0\n0\n4 (4.2%)\n\n\nNormal\n3 (3.5%)\n73 (84.9%)\n0\n76 (88.4%)\n0\n65 (90.3%)\n2 (2.8%)\n67 (93.1%)\n1 (1%)\n67 (69.8%)\n1 (1%)\n69 (71.9%)\n\n\nHigh\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n\n\nTotal\n7 (8.1%)\n75 (87.2%)\n0\n82 (95.3%)\n1 (1.4%)\n68 (94.4%)\n2 (2.8%)\n71 (98.6%)\n5 (5.2%)\n67 (69.8%)\n1 (1%)\n73 (76%)\n\n\nWeek 4\nLow\n4 (4.7%)\n2 (2.3%)\n0\n6 (7%)\n1 (1.4%)\n0\n0\n1 (1.4%)\n4 (4.2%)\n2 (2.1%)\n0\n6 (6.2%)\n\n\nNormal\n1 (1.2%)\n68 (79.1%)\n0\n69 (80.2%)\n0\n63 (87.5%)\n1 (1.4%)\n64 (88.9%)\n1 (1%)\n57 (59.4%)\n0\n58 (60.4%)\n\n\nHigh\n0\n0\n0\n0\n0\n1 (1.4%)\n0\n1 (1.4%)\n0\n0\n0\n0\n\n\nTotal\n5 (5.8%)\n70 (81.4%)\n0\n75 (87.2%)\n1 (1.4%)\n64 (88.9%)\n1 (1.4%)\n66 (91.7%)\n5 (5.2%)\n59 (61.5%)\n0\n64 (66.7%)\n\n\nWeek 6\nLow\n3 (3.5%)\n1 (1.2%)\n0\n4 (4.7%)\n0\n1 (1.4%)\n0\n1 (1.4%)\n4 (4.2%)\n3 (3.1%)\n0\n7 (7.3%)\n\n\nNormal\n2 (2.3%)\n64 (74.4%)\n0\n66 (76.7%)\n0\n51 (70.8%)\n1 (1.4%)\n52 (72.2%)\n1 (1%)\n50 (52.1%)\n0\n51 (53.1%)\n\n\nHigh\n0\n1 (1.2%)\n0\n1 (1.2%)\n0\n1 (1.4%)\n0\n1 (1.4%)\n0\n0\n0\n0\n\n\nTotal\n5 (5.8%)\n66 (76.7%)\n0\n71 (82.6%)\n0\n53 (73.6%)\n1 (1.4%)\n54 (75%)\n5 (5.2%)\n53 (55.2%)\n0\n58 (60.4%)\n\n\n\nThis is a footnote\n\n\n\n\n\n\n\n\n\n\n\n\nSplit adlb_prep by multiple parameters.\nMap over count_shifts() on the data split by parameters\nCreate a function std_shift_display() to combine the {gt} table display steps and map it over on the list output retrieved from the previous step\n\n\n\nCode\nadlb_multi &lt;- adlb_prep |&gt;\n  filter(toupper(.data$PARAMCD) %in% c(\"PLAT\", \"HCT\", \"MCH\")) |&gt;\n  group_nest(.data$PARAM)\n\nshift_out &lt;- map(adlb_multi$data, \\(x) {\n  count_shifts(\n    bds_dataset = x,\n    trt_var = exprs(TRT_VAR),\n    analysis_grade_var = exprs(ANRIND),\n    base_grade_var = exprs(BNRIND),\n    grade_var_order = exprs(Low, Normal, High),\n    visit_var = exprs(AVISIT, AVISITN)\n  )\n}) |&gt;\n  set_names(adlb_multi$PARAM)\n\n# add percentages\nshift_out &lt;- map(shift_out, \\(df) {\n  df |&gt;\n    add_pct2cols(\n      exclude_cols = exprs(AVISIT, ANRIND),\n      trt_bign = trt_bign\n    )\n})\n\nlist_out &lt;-\n  map(names(shift_out), \\(x) {\n    shift_out[[x]] |&gt;\n      std_shift_display(\n        param = x,\n        group_col = \"AVISIT\",\n        title = \"Protocol: CDISCPILOT01&lt;br&gt;&lt;br&gt;Table x.x&lt;br&gt;Shift Table of Lab\n        Hematology&lt;br&gt;(Full Safety Analysis Set)\",\n        footnote = \"Add footnote here\",\n        stub_header = \"Analysis Visit\"\n      )\n  })\n\n\n\n\n\n\n\n\nProtocol: CDISCPILOT01Table x.xShift Table of Lab Hematology(Full Safety Analysis Set)\n\n\n\n\nParameter = Ery. Mean Corpuscular Hemoglobin (fmol(Fe))\n\n\n\n\nAnalysis Visit\n\n\nReferenceRange\n\n\nPlacebo(N=86)Baselinen (%)\n\n\nXanomeline High Dose(N=72)Baselinen (%)\n\n\nXanomeline Low Dose(N=96)Baselinen (%)\n\n\n\n\nLow\n\n\nNormal\n\n\nHigh\n\n\nTotal\n\n\nLow\n\n\nNormal\n\n\nHigh\n\n\nTotal\n\n\nLow\n\n\nNormal\n\n\nHigh\n\n\nTotal\n\n\n\n\n\n\nWeek 2\n\n\nLow\n\n\n0\n\n\n0\n\n\n0\n\n\n0\n\n\n1 (1.4%)\n\n\n0\n\n\n0\n\n\n1 (1.4%)\n\n\n0\n\n\n0\n\n\n0\n\n\n0\n\n\n\n\nNormal\n\n\n0\n\n\n78 (90.7%)\n\n\n2 (2.3%)\n\n\n80 (93%)\n\n\n0\n\n\n63 (87.5%)\n\n\n2 (2.8%)\n\n\n65 (90.3%)\n\n\n0\n\n\n68 (70.8%)\n\n\n2 (2.1%)\n\n\n70 (72.9%)\n\n\n\n\nHigh\n\n\n0\n\n\n0\n\n\n2 (2.3%)\n\n\n2 (2.3%)\n\n\n0\n\n\n0\n\n\n5 (6.9%)\n\n\n5 (6.9%)\n\n\n0\n\n\n2 (2.1%)\n\n\n1 (1%)\n\n\n3 (3.1%)\n\n\n\n\nTotal\n\n\n0\n\n\n78 (90.7%)\n\n\n4 (4.7%)\n\n\n82 (95.3%)\n\n\n1 (1.4%)\n\n\n63 (87.5%)\n\n\n7 (9.7%)\n\n\n71 (98.6%)\n\n\n0\n\n\n70 (72.9%)\n\n\n3 (3.1%)\n\n\n73 (76%)\n\n\n\n\nWeek 4\n\n\nLow\n\n\n0\n\n\n0\n\n\n0\n\n\n0\n\n\n1 (1.4%)\n\n\n0\n\n\n0\n\n\n1 (1.4%)\n\n\n0\n\n\n0\n\n\n0\n\n\n0\n\n\n\n\nNormal\n\n\n0\n\n\n70 (81.4%)\n\n\n1 (1.2%)\n\n\n71 (82.6%)\n\n\n0\n\n\n58 (80.6%)\n\n\n1 (1.4%)\n\n\n59 (81.9%)\n\n\n0\n\n\n60 (62.5%)\n\n\n2 (2.1%)\n\n\n62 (64.6%)\n\n\n\n\nHigh\n\n\n0\n\n\n2 (2.3%)\n\n\n2 (2.3%)\n\n\n4 (4.7%)\n\n\n0\n\n\n0\n\n\n6 (8.3%)\n\n\n6 (8.3%)\n\n\n0\n\n\n1 (1%)\n\n\n1 (1%)\n\n\n2 (2.1%)\n\n\n\n\nTotal\n\n\n0\n\n\n72 (83.7%)\n\n\n3 (3.5%)\n\n\n75 (87.2%)\n\n\n1 (1.4%)\n\n\n58 (80.6%)\n\n\n7 (9.7%)\n\n\n66 (91.7%)\n\n\n0\n\n\n61 (63.5%)\n\n\n3 (3.1%)\n\n\n64 (66.7%)\n\n\n\n\nWeek 6\n\n\nLow\n\n\n0\n\n\n0\n\n\n0\n\n\n0\n\n\n0\n\n\n0\n\n\n0\n\n\n0\n\n\n0\n\n\n0\n\n\n0\n\n\n0\n\n\n\n\nNormal\n\n\n0\n\n\n65 (75.6%)\n\n\n2 (2.3%)\n\n\n67 (77.9%)\n\n\n0\n\n\n47 (65.3%)\n\n\n1 (1.4%)\n\n\n48 (66.7%)\n\n\n0\n\n\n55 (57.3%)\n\n\n2 (2.1%)\n\n\n57 (59.4%)\n\n\n\n\nHigh\n\n\n0\n\n\n2 (2.3%)\n\n\n2 (2.3%)\n\n\n4 (4.7%)\n\n\n0\n\n\n0\n\n\n6 (8.3%)\n\n\n6 (8.3%)\n\n\n0\n\n\n0\n\n\n1 (1%)\n\n\n1 (1%)\n\n\n\n\nTotal\n\n\n0\n\n\n67 (77.9%)\n\n\n4 (4.7%)\n\n\n71 (82.6%)\n\n\n0\n\n\n47 (65.3%)\n\n\n7 (9.7%)\n\n\n54 (75%)\n\n\n0\n\n\n55 (57.3%)\n\n\n3 (3.1%)\n\n\n58 (60.4%)\n\n\n\n\n\n\nAdd footnote here\n\n\n\n\n\n\n\n\n\n\n\nProtocol: CDISCPILOT01Table x.xShift Table of Lab Hematology(Full Safety Analysis Set)\n\n\n\n\nParameter = Hematocrit (1)\n\n\n\n\nAnalysis Visit\n\n\nReferenceRange\n\n\nPlacebo(N=86)Baselinen (%)\n\n\nXanomeline High Dose(N=72)Baselinen (%)\n\n\nXanomeline Low Dose(N=96)Baselinen (%)\n\n\n\n\nLow\n\n\nNormal\n\n\nHigh\n\n\nTotal\n\n\nLow\n\n\nNormal\n\n\nHigh\n\n\nTotal\n\n\nLow\n\n\nNormal\n\n\nHigh\n\n\nTotal\n\n\n\n\n\n\nWeek 2\n\n\nLow\n\n\n0\n\n\n0\n\n\n0\n\n\n0\n\n\n1 (1.4%)\n\n\n0\n\n\n0\n\n\n1 (1.4%)\n\n\n1 (1%)\n\n\n2 (2.1%)\n\n\n0\n\n\n3 (3.1%)\n\n\n\n\nNormal\n\n\n3 (3.5%)\n\n\n79 (91.9%)\n\n\n0\n\n\n82 (95.3%)\n\n\n0\n\n\n66 (91.7%)\n\n\n2 (2.8%)\n\n\n68 (94.4%)\n\n\n0\n\n\n67 (69.8%)\n\n\n1 (1%)\n\n\n68 (70.8%)\n\n\n\n\nHigh\n\n\n0\n\n\n0\n\n\n0\n\n\n0\n\n\n0\n\n\n1 (1.4%)\n\n\n0\n\n\n1 (1.4%)\n\n\n0\n\n\n0\n\n\n1 (1%)\n\n\n1 (1%)\n\n\n\n\nTotal\n\n\n3 (3.5%)\n\n\n79 (91.9%)\n\n\n0\n\n\n82 (95.3%)\n\n\n1 (1.4%)\n\n\n67 (93.1%)\n\n\n2 (2.8%)\n\n\n70 (97.2%)\n\n\n1 (1%)\n\n\n69 (71.9%)\n\n\n2 (2.1%)\n\n\n72 (75%)\n\n\n\n\nWeek 4\n\n\nLow\n\n\n3 (3.5%)\n\n\n0\n\n\n0\n\n\n3 (3.5%)\n\n\n0\n\n\n0\n\n\n0\n\n\n0\n\n\n1 (1%)\n\n\n2 (2.1%)\n\n\n0\n\n\n3 (3.1%)\n\n\n\n\nNormal\n\n\n0\n\n\n71 (82.6%)\n\n\n0\n\n\n71 (82.6%)\n\n\n1 (1.4%)\n\n\n61 (84.7%)\n\n\n2 (2.8%)\n\n\n64 (88.9%)\n\n\n1 (1%)\n\n\n58 (60.4%)\n\n\n1 (1%)\n\n\n60 (62.5%)\n\n\n\n\nHigh\n\n\n0\n\n\n0\n\n\n0\n\n\n0\n\n\n0\n\n\n1 (1.4%)\n\n\n0\n\n\n1 (1.4%)\n\n\n0\n\n\n0\n\n\n0\n\n\n0\n\n\n\n\nTotal\n\n\n3 (3.5%)\n\n\n71 (82.6%)\n\n\n0\n\n\n74 (86%)\n\n\n1 (1.4%)\n\n\n62 (86.1%)\n\n\n2 (2.8%)\n\n\n65 (90.3%)\n\n\n2 (2.1%)\n\n\n60 (62.5%)\n\n\n1 (1%)\n\n\n63 (65.6%)\n\n\n\n\nWeek 6\n\n\nLow\n\n\n2 (2.3%)\n\n\n1 (1.2%)\n\n\n0\n\n\n3 (3.5%)\n\n\n1 (1.4%)\n\n\n0\n\n\n0\n\n\n1 (1.4%)\n\n\n1 (1%)\n\n\n1 (1%)\n\n\n0\n\n\n2 (2.1%)\n\n\n\n\nNormal\n\n\n0\n\n\n66 (76.7%)\n\n\n0\n\n\n66 (76.7%)\n\n\n0\n\n\n50 (69.4%)\n\n\n2 (2.8%)\n\n\n52 (72.2%)\n\n\n1 (1%)\n\n\n52 (54.2%)\n\n\n1 (1%)\n\n\n54 (56.2%)\n\n\n\n\nHigh\n\n\n0\n\n\n1 (1.2%)\n\n\n0\n\n\n1 (1.2%)\n\n\n0\n\n\n1 (1.4%)\n\n\n0\n\n\n1 (1.4%)\n\n\n0\n\n\n0\n\n\n0\n\n\n0\n\n\n\n\nTotal\n\n\n2 (2.3%)\n\n\n68 (79.1%)\n\n\n0\n\n\n70 (81.4%)\n\n\n1 (1.4%)\n\n\n51 (70.8%)\n\n\n2 (2.8%)\n\n\n54 (75%)\n\n\n2 (2.1%)\n\n\n53 (55.2%)\n\n\n1 (1%)\n\n\n56 (58.3%)\n\n\n\n\n\n\nAdd footnote here\n\n\n\n\n\n\n\n\n\n\n\nProtocol: CDISCPILOT01Table x.xShift Table of Lab Hematology(Full Safety Analysis Set)\n\n\n\n\nParameter = Platelet (10^9/L)\n\n\n\n\nAnalysis Visit\n\n\nReferenceRange\n\n\nPlacebo(N=86)Baselinen (%)\n\n\nXanomeline High Dose(N=72)Baselinen (%)\n\n\nXanomeline Low Dose(N=96)Baselinen (%)\n\n\n\n\nLow\n\n\nNormal\n\n\nHigh\n\n\nTotal\n\n\nLow\n\n\nNormal\n\n\nHigh\n\n\nTotal\n\n\nLow\n\n\nNormal\n\n\nHigh\n\n\nTotal\n\n\n\n\n\n\nWeek 2\n\n\nLow\n\n\n0\n\n\n0\n\n\n0\n\n\n0\n\n\n1 (1.4%)\n\n\n0\n\n\n0\n\n\n1 (1.4%)\n\n\n0\n\n\n0\n\n\n0\n\n\n0\n\n\n\n\nNormal\n\n\n0\n\n\n80 (93%)\n\n\n1 (1.2%)\n\n\n81 (94.2%)\n\n\n0\n\n\n70 (97.2%)\n\n\n0\n\n\n70 (97.2%)\n\n\n1 (1%)\n\n\n66 (68.8%)\n\n\n1 (1%)\n\n\n68 (70.8%)\n\n\n\n\nHigh\n\n\n0\n\n\n0\n\n\n1 (1.2%)\n\n\n1 (1.2%)\n\n\n0\n\n\n0\n\n\n0\n\n\n0\n\n\n0\n\n\n2 (2.1%)\n\n\n0\n\n\n2 (2.1%)\n\n\n\n\nTotal\n\n\n0\n\n\n80 (93%)\n\n\n2 (2.3%)\n\n\n82 (95.3%)\n\n\n1 (1.4%)\n\n\n70 (97.2%)\n\n\n0\n\n\n71 (98.6%)\n\n\n1 (1%)\n\n\n68 (70.8%)\n\n\n1 (1%)\n\n\n70 (72.9%)\n\n\n\n\nWeek 4\n\n\nLow\n\n\n0\n\n\n0\n\n\n0\n\n\n0\n\n\n0\n\n\n0\n\n\n0\n\n\n0\n\n\n1 (1%)\n\n\n0\n\n\n0\n\n\n1 (1%)\n\n\n\n\nNormal\n\n\n0\n\n\n72 (83.7%)\n\n\n0\n\n\n72 (83.7%)\n\n\n0\n\n\n65 (90.3%)\n\n\n0\n\n\n65 (90.3%)\n\n\n0\n\n\n61 (63.5%)\n\n\n1 (1%)\n\n\n62 (64.6%)\n\n\n\n\nHigh\n\n\n0\n\n\n0\n\n\n2 (2.3%)\n\n\n2 (2.3%)\n\n\n0\n\n\n0\n\n\n0\n\n\n0\n\n\n0\n\n\n0\n\n\n0\n\n\n0\n\n\n\n\nTotal\n\n\n0\n\n\n72 (83.7%)\n\n\n2 (2.3%)\n\n\n74 (86%)\n\n\n0\n\n\n65 (90.3%)\n\n\n0\n\n\n65 (90.3%)\n\n\n1 (1%)\n\n\n61 (63.5%)\n\n\n1 (1%)\n\n\n63 (65.6%)\n\n\n\n\nWeek 6\n\n\nLow\n\n\n0\n\n\n0\n\n\n0\n\n\n0\n\n\n0\n\n\n0\n\n\n0\n\n\n0\n\n\n1 (1%)\n\n\n0\n\n\n0\n\n\n1 (1%)\n\n\n\n\nNormal\n\n\n0\n\n\n69 (80.2%)\n\n\n1 (1.2%)\n\n\n70 (81.4%)\n\n\n0\n\n\n53 (73.6%)\n\n\n0\n\n\n53 (73.6%)\n\n\n0\n\n\n56 (58.3%)\n\n\n1 (1%)\n\n\n57 (59.4%)\n\n\n\n\nHigh\n\n\n0\n\n\n0\n\n\n1 (1.2%)\n\n\n1 (1.2%)\n\n\n0\n\n\n0\n\n\n0\n\n\n0\n\n\n0\n\n\n0\n\n\n0\n\n\n0\n\n\n\n\nTotal\n\n\n0\n\n\n69 (80.2%)\n\n\n2 (2.3%)\n\n\n71 (82.6%)\n\n\n0\n\n\n53 (73.6%)\n\n\n0\n\n\n53 (73.6%)\n\n\n1 (1%)\n\n\n56 (58.3%)\n\n\n1 (1%)\n\n\n58 (60.4%)\n\n\n\n\n\n\nAdd footnote here",
    "crumbs": [
      "Shift Table in R"
    ]
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "shiftR",
    "section": "",
    "text": "About\nThis project is an entry for Posit 2024 Table Contest. An alternative link to the website is available here.\nReferences\n\nICH E3 Structure and Content of Clinical Study Report\nAn Effective way to produce a Shift Table\nProducing Clinical Laboratory Shift Tables From ADaM Data\nTidy Design Principles\nThe Design Philosophy of Great Tables\n\nR Packages Used\n\ndplyr\ntidyr\npurrr\nstringr\nrlang\ngt\nhere\npharmaverseadam\nDT (to display intermediate datasets)\n\nThe hex sticker of the website was made using hexmake\n\n\n\n Back to top",
    "crumbs": [
      "References"
    ]
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Tidy Shift Tables in R",
    "section": "",
    "text": "A shift table is a table that displays the number of subjects in different range (e.g. low, normal, or high) at baseline and then shift or transition at selected time points or time intervals. The purpose of the shift table is to illustrate the progress of change from baseline and help to make reasonable inference.",
    "crumbs": [
      "Introduction"
    ]
  },
  {
    "objectID": "index.html#what-is-a-shift-table",
    "href": "index.html#what-is-a-shift-table",
    "title": "Tidy Shift Tables in R",
    "section": "",
    "text": "A shift table is a table that displays the number of subjects in different range (e.g. low, normal, or high) at baseline and then shift or transition at selected time points or time intervals. The purpose of the shift table is to illustrate the progress of change from baseline and help to make reasonable inference.",
    "crumbs": [
      "Introduction"
    ]
  },
  {
    "objectID": "index.html#shift-tables-in-clinical-trials",
    "href": "index.html#shift-tables-in-clinical-trials",
    "title": "Tidy Shift Tables in R",
    "section": "Shift Tables in Clinical Trials",
    "text": "Shift Tables in Clinical Trials\nIt is important to look at the effect of the drug by comparing values at baseline and post-baseline in any clinical trials. Shift Table is one of the analysis methods suggested in ICH E3 Guidelines to show the number of patients who are low, normal, or high at baseline and at selected time intervals. It is easier to figure out any abnormality in data because the layout helps to get the count of subjects at two time points simultaneously. It can be used to analyze any data like laboratory records, vital signs, ECG etc.",
    "crumbs": [
      "Introduction"
    ]
  },
  {
    "objectID": "index.html#shift-table-for-laboratory-records",
    "href": "index.html#shift-table-for-laboratory-records",
    "title": "Tidy Shift Tables in R",
    "section": "Shift Table for Laboratory Records",
    "text": "Shift Table for Laboratory Records\nAll safety related data is collected in a clinical trial study for safety analysis. The laboratory data is one of the most important assessments for safety consideration.\nThere are several summary tables commonly used to present laboratory results; Descriptive statistics, CTCAE summaries and Shift Tables are some of the most widely used ones. The shift table is one of the most frequently requested outputs in a clinical study by statisticians or clinicians.\nFigure 1 represents a SAS generated Shift Table showing the number of subjects with low, normal, or high Hemoglobin records at baseline and post-dose together.\n\n\n\nFigure 1",
    "crumbs": [
      "Introduction"
    ]
  }
]