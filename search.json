[
  {
    "objectID": "shift.html",
    "href": "shift.html",
    "title": "Creating a Shift Table in R",
    "section": "",
    "text": "Here is a workflow to create a Shift Table in R, using the {tidyverse} suite for data processing, and {gt} to build the desired table layout.",
    "crumbs": [
      "Shift Table in R"
    ]
  },
  {
    "objectID": "shift.html#required-packages",
    "href": "shift.html#required-packages",
    "title": "Creating a Shift Table in R",
    "section": "Required Packages",
    "text": "Required Packages\n\n\nCode\nsuppressPackageStartupMessages(library(dplyr))\nsuppressPackageStartupMessages(library(tidyr))\nsuppressPackageStartupMessages(library(rlang))\nsuppressPackageStartupMessages(library(purrr))\nsuppressPackageStartupMessages(library(stringr))\nsuppressPackageStartupMessages(library(gt))\nsuppressPackageStartupMessages(library(here))\n\n# list all files\nfiles &lt;- list.files(here(\"R\"), pattern = \".R\", full.names = TRUE)\n# Read all files\nwalk(files, source)",
    "crumbs": [
      "Shift Table in R"
    ]
  },
  {
    "objectID": "shift.html#data-used-for-analysis",
    "href": "shift.html#data-used-for-analysis",
    "title": "Creating a Shift Table in R",
    "section": "Data used for Analysis",
    "text": "Data used for Analysis\nWe will make use of the adsl and adlb test ADaM datasets from the {pharmaverseadam} R package for analysis.\n\nADSLADLB\n\n\nADSL is the subject level analysis dataset\n\n\nCode\nadsl &lt;- pharmaverseadam::adsl\n\n\n\n\n\n\n\n\n\n\nADLB is the analysis dataset for Laboratory Records\n\n\nCode\nadlb &lt;- pharmaverseadam::adlb",
    "crumbs": [
      "Shift Table in R"
    ]
  },
  {
    "objectID": "shift.html#variables-used-for-analysis",
    "href": "shift.html#variables-used-for-analysis",
    "title": "Creating a Shift Table in R",
    "section": "Variables used for Analysis",
    "text": "Variables used for Analysis\n\nUSUBJID - Unique Subject Identifier\nSAFFL - Safety Population Flag\nTRT01A - Actual Treatment Arm for Period 01\nPARAM - Parameter\nPARAMCD - Parameter Code\nAVISIT - Analysis Visit\nAVISITN - Analysis Visit (Numeric)\nAVAL - Analysis Value\nANL01FL - Analysis Flag 01\nBNRIND - Baseline Reference Range Indicator\nANRIND - Analysis Reference Range Indicator",
    "crumbs": [
      "Shift Table in R"
    ]
  },
  {
    "objectID": "shift.html#programming-flow",
    "href": "shift.html#programming-flow",
    "title": "Creating a Shift Table in R",
    "section": "Programming Flow",
    "text": "Programming Flow\n\n1. Calculating BIG N\n\nKeep only safety subjects (SAFFL == 'Y') in adsl\nCount number of subjects in the full safety analysis set within each treatment arm (TRT01A)\n\n\n\nCode\nadsl_bign &lt;- adsl |&gt;\n  na_to_missing() |&gt;\n  filter(.data$SAFFL == \"Y\") |&gt;\n  select(all_of(c(\"USUBJID\", \"TRT01A\"))) |&gt;\n  add_count(.data$TRT01A, name = \"TRT_N\")\n\n\n\n\n\n\n\n\n\n\n2. Preprocessing Lab Records\n\nMerge adsl_bign to adlb to add TRT_N\nFilter out missing values in Baseline Reference Range Indicator (BNRIND), Analysis Reference Range Indicator (ANRIND) and Analysis Value (AVAL)\nSubset the resulting data for subjects with post-does records where analysis flag (ANL01FL) is equal to 'Y'\nSubset data to keep records within the time period (eg. Week 2, Week 4, Week 6) we want to see the shifts in Laboratory Tests\nAdd BIG N to treatment labels by concatenating TRT_N with TRT01A\n\n\n\nCode\nadlb_prep &lt;- adlb |&gt;\n  na_to_missing() |&gt;\n  mutate(across(all_of(c(\"BNRIND\", \"ANRIND\")), str_to_title)) |&gt;\n  left_join(adsl_bign, by = c(\"USUBJID\", \"TRT01A\")) |&gt;\n  filter(\n    .data$BNRIND != \"&lt;Missing&gt;\",\n    .data$ANRIND != \"&lt;Missing&gt;\",\n    !is.na(.data$AVAL),\n    .data$ANL01FL == \"Y\",\n    .data$AVISIT %in% c(\"Week 2\", \"Week 4\", \"Week 6\")\n  ) |&gt;\n  mutate(TRT_VAR = paste0(.data$TRT01A, \"&lt;br&gt;(N=\", .data$TRT_N, \")\")) |&gt;\n  select(-TRT_N)\n\n\n Subset adlb_prep to keep only Hemoglobin records \n\n\nCode\nadlb_hgb &lt;- adlb_prep |&gt;\n  filter(.data$PARAMCD == \"HGB\")\n\n\n\n\n\n\n\n\n\n\n3. Get all combinations of Range Indicator values\nCreate a dummy dataset that contains all possible combination of BNRIND and ANRIND values by Treatment and Visit.\n\n\nCode\ncomb_base_pbase &lt;- expand_grid(\n  TRT_VAR = unique(adlb_hgb[[\"TRT_VAR\"]]),\n  AVISIT = unique(adlb_hgb[[\"AVISIT\"]]),\n  BNRIND = c(\"Low\", \"Normal\", \"High\", \"Total\")\n) |&gt;\n  cross_join(tibble(ANRIND = c(\"Low\", \"Normal\", \"High\")))\n\n\n\n\n\n\n\n\n\n\n4. Performing Counts by Analysis Visit\n\n\nCode\nshift_counts &lt;- adlb_hgb |&gt;\n  bind_rows(mutate(adlb_hgb, BNRIND = \"Total\")) |&gt;\n  group_by(!!!syms(c(\"TRT_VAR\", \"AVISITN\", \"ANRIND\", \"BNRIND\"))) |&gt;\n  count(.data[[\"AVISIT\"]], name = \"CNT\") |&gt;\n  ungroup() |&gt;\n  # merge dummy dataset to get all combinations of `ANRIND` and `BNRIND` values\n  full_join(comb_base_pbase, by = c(\"TRT_VAR\", \"AVISIT\", \"BNRIND\", \"ANRIND\")) |&gt;\n  mutate(across(\"CNT\", ~ replace_na(.x, 0))) |&gt;\n  arrange(\n    .data[[\"TRT_VAR\"]],\n    factor(.data[[\"BNRIND\"]], levels = c(\"Low\", \"Normal\", \"High\", \"Total\"))\n  )\n\n\n\n\n\n\n\n\n\n\n5. Reshaping Data\n\nReshaping data to wide format to get the final Shift Table layout\nAdding Post-Baseline Grade Totals\n\n\n\nCode\nshift_wide &lt;- shift_counts |&gt;\n  pivot_wider(\n    id_cols = all_of(c(\"AVISIT\", \"ANRIND\")),\n    names_from = all_of(c(\"TRT_VAR\", \"BNRIND\")),\n    values_from = \"CNT\",\n    names_sep = \"^\"\n  )\n\npost_base_grade_totals &lt;- shift_wide |&gt;\n  summarize(across(where(is.numeric), sum), .by = all_of(\"AVISIT\")) |&gt;\n  mutate(ANRIND = \"Total\")\n\nvisit_levels &lt;-\n  arrange(filter(shift_counts, !is.na(.data$AVISITN)), by = .data$AVISITN) |&gt;\n  pull(.data$AVISIT) |&gt;\n  unique()\n\nshift_final &lt;- shift_wide |&gt;\n  bind_rows(post_base_grade_totals) |&gt;\n  arrange(\n    factor(.data$AVISIT, levels = visit_levels),\n    factor(.data$ANRIND, levels = c(\"Low\", \"Normal\", \"High\", \"Total\"))\n  )\n\n\nAn alternate and tidier approach would be to create a function say count_shifts_by_visit() to cover Steps 3-5\n\n\nCode\nshift_final &lt;-\n  count_shifts_by_visit(\n    bds_dataset = adlb_hgb,\n    trt_var = exprs(TRT_VAR),\n    analysis_grade_var = exprs(ANRIND),\n    base_grade_var = exprs(BNRIND),\n    grade_var_order = exprs(Low, Normal, High),\n    visit_var = exprs(AVISIT, AVISITN)\n  )\n\n\n\n\n\n\n\n\n\n\n6. Adding Percentages\n\n\nCode\ntrt_bign &lt;-\n  map(\n    set_names(unique(adsl_bign[[\"TRT01A\"]])),\n    \\(trt_val) get_trt_total(adsl_bign, exprs(TRT01A, TRT_N), trt_val)\n  )\n\nshift_final &lt;- shift_final |&gt;\n  add_pct2cols(\n    exclude_cols = exprs(AVISIT, ANRIND),\n    trt_bign = trt_bign\n  )\n\n\n\n\n\n\n\n\n\n\n7. Displaying the Final Table with {gt}\n\nSingle Parameter (Hemoglobin)Multiple Parameters\n\n\n\n\nCode\nout &lt;-\n  shift_final |&gt;\n  gt(groupname_col = \"AVISIT\", row_group_as_column = TRUE) |&gt;\n  cols_label_with(\n    columns = contains(\"ANRIND\"), \\(x) md(\"Reference&lt;br&gt;Range\")\n  ) |&gt;\n  tab_spanner_delim(delim = \"^\") |&gt;\n  text_transform(\n    fn = \\(x) map(x, \\(y) md(paste0(y, \"&lt;br&gt;Baseline&lt;br&gt;n (%)\"))),\n    locations = cells_column_spanners()\n  ) |&gt;\n  # headers and footers\n  tab_stubhead(md(\"Analysis Visit\")) |&gt;\n  tab_footnote(footnote = md(\"N: Number of subjects in the full safety analysis set, within each treatment group&lt;br&gt;n: Subjects with at least one baseline and post-baseline records\")) |&gt;\n  tab_header(\n    preheader = c(\"Protocol: CDISCPILOT01\", \"Cutoff date: DDMMYYYY\"), # for rtf\n    title = md(\n      \"Table x.x&lt;br&gt;Shift Table of Lab Hematology&lt;br&gt;(Full Safety Analysis Set)\"\n    ),\n    subtitle = paste0(\"Parameter = \", unique(pull(adlb_hgb, \"PARAM\")))\n  ) |&gt;\n  tab_source_note(\n    \"Source: ADLB DDMMYYYY hh:mm; Listing x.xx; SDTM package: DDMMYYYY\"\n  ) |&gt;\n  # cell styling\n  tab_style(\n    style = cell_text(weight = \"bold\"),\n    locations = cells_body(columns = 2)\n  ) |&gt;\n  tab_style(\n    style = cell_text(align = \"center\"),\n    locations = cells_body(columns = -c(1, 2))\n  ) |&gt;\n  tab_style(\n    style = cell_text(align = \"center\"),\n    locations = cells_column_labels(columns = -c(1, 2))\n  ) |&gt;\n  # other options\n  tab_options(\n    # rtf options\n    page.orientation = \"landscape\",\n    page.numbering = TRUE,\n    page.header.use_tbl_headings = TRUE,\n    page.footer.use_tbl_notes = TRUE,\n    # page.height = \"18in\", uncomment to modify page dimensions while saving as rtf\n    # other styling\n    table.background.color = \"white\",\n    table.font.names = \"monospace-slab-serif\",\n    row_group.font.weight = \"bold\",\n    column_labels.font.weight = \"bold\",\n    heading.title.font.weight = \"bold\",\n    heading.title.font.size = \"20px\",\n    heading.padding = \"10px\",\n    heading.subtitle.font.size = \"14px\"\n  ) |&gt;\n  opt_css(\n    css = \"\n    .gt_heading {\n      border-top-style: hidden !important;\n    }\n    .gt_sourcenote {\n      border-bottom-style: hidden !important;\n    }\n    .gt_table {\n      width: max-content !important;\n    }\n    .gt_subtitle, .gt_footnotes, .gt_sourcenote {\n      text-align: left !important;\n      font-weight: bold !important;\n      color: gray !important;\n    }\n    \"\n  )\n\n\n\n\n\n\n\n\nTable x.xShift Table of Lab Hematology(Full Safety Analysis Set)\n\n\n\n\nParameter = Hemoglobin (mmol/L)\n\n\n\n\nAnalysis Visit\n\n\nReferenceRange\n\n\nPlacebo(N=86)Baselinen (%)\n\n\nXanomeline High Dose(N=72)Baselinen (%)\n\n\nXanomeline Low Dose(N=96)Baselinen (%)\n\n\n\n\nLow\n\n\nNormal\n\n\nHigh\n\n\nTotal\n\n\nLow\n\n\nNormal\n\n\nHigh\n\n\nTotal\n\n\nLow\n\n\nNormal\n\n\nHigh\n\n\nTotal\n\n\n\n\n\n\nWeek 2\n\n\nLow\n\n\n4 (4.7%)\n\n\n2 (2.3%)\n\n\n0\n\n\n6 (7%)\n\n\n1 (1.4%)\n\n\n3 (4.2%)\n\n\n0\n\n\n4 (5.6%)\n\n\n4 (4.2%)\n\n\n0\n\n\n0\n\n\n4 (4.2%)\n\n\n\n\nNormal\n\n\n3 (3.5%)\n\n\n73 (84.9%)\n\n\n0\n\n\n76 (88.4%)\n\n\n0\n\n\n65 (90.3%)\n\n\n2 (2.8%)\n\n\n67 (93.1%)\n\n\n1 (1%)\n\n\n67 (69.8%)\n\n\n1 (1%)\n\n\n69 (71.9%)\n\n\n\n\nHigh\n\n\n0\n\n\n0\n\n\n0\n\n\n0\n\n\n0\n\n\n0\n\n\n0\n\n\n0\n\n\n0\n\n\n0\n\n\n0\n\n\n0\n\n\n\n\nTotal\n\n\n7 (8.1%)\n\n\n75 (87.2%)\n\n\n0\n\n\n82 (95.3%)\n\n\n1 (1.4%)\n\n\n68 (94.4%)\n\n\n2 (2.8%)\n\n\n71 (98.6%)\n\n\n5 (5.2%)\n\n\n67 (69.8%)\n\n\n1 (1%)\n\n\n73 (76%)\n\n\n\n\nWeek 4\n\n\nLow\n\n\n4 (4.7%)\n\n\n2 (2.3%)\n\n\n0\n\n\n6 (7%)\n\n\n1 (1.4%)\n\n\n0\n\n\n0\n\n\n1 (1.4%)\n\n\n4 (4.2%)\n\n\n2 (2.1%)\n\n\n0\n\n\n6 (6.2%)\n\n\n\n\nNormal\n\n\n1 (1.2%)\n\n\n68 (79.1%)\n\n\n0\n\n\n69 (80.2%)\n\n\n0\n\n\n63 (87.5%)\n\n\n1 (1.4%)\n\n\n64 (88.9%)\n\n\n1 (1%)\n\n\n57 (59.4%)\n\n\n0\n\n\n58 (60.4%)\n\n\n\n\nHigh\n\n\n0\n\n\n0\n\n\n0\n\n\n0\n\n\n0\n\n\n1 (1.4%)\n\n\n0\n\n\n1 (1.4%)\n\n\n0\n\n\n0\n\n\n0\n\n\n0\n\n\n\n\nTotal\n\n\n5 (5.8%)\n\n\n70 (81.4%)\n\n\n0\n\n\n75 (87.2%)\n\n\n1 (1.4%)\n\n\n64 (88.9%)\n\n\n1 (1.4%)\n\n\n66 (91.7%)\n\n\n5 (5.2%)\n\n\n59 (61.5%)\n\n\n0\n\n\n64 (66.7%)\n\n\n\n\nWeek 6\n\n\nLow\n\n\n3 (3.5%)\n\n\n1 (1.2%)\n\n\n0\n\n\n4 (4.7%)\n\n\n0\n\n\n1 (1.4%)\n\n\n0\n\n\n1 (1.4%)\n\n\n4 (4.2%)\n\n\n3 (3.1%)\n\n\n0\n\n\n7 (7.3%)\n\n\n\n\nNormal\n\n\n2 (2.3%)\n\n\n64 (74.4%)\n\n\n0\n\n\n66 (76.7%)\n\n\n0\n\n\n51 (70.8%)\n\n\n1 (1.4%)\n\n\n52 (72.2%)\n\n\n1 (1%)\n\n\n50 (52.1%)\n\n\n0\n\n\n51 (53.1%)\n\n\n\n\nHigh\n\n\n0\n\n\n1 (1.2%)\n\n\n0\n\n\n1 (1.2%)\n\n\n0\n\n\n1 (1.4%)\n\n\n0\n\n\n1 (1.4%)\n\n\n0\n\n\n0\n\n\n0\n\n\n0\n\n\n\n\nTotal\n\n\n5 (5.8%)\n\n\n66 (76.7%)\n\n\n0\n\n\n71 (82.6%)\n\n\n0\n\n\n53 (73.6%)\n\n\n1 (1.4%)\n\n\n54 (75%)\n\n\n5 (5.2%)\n\n\n53 (55.2%)\n\n\n0\n\n\n58 (60.4%)\n\n\n\n\n\n\nSource: ADLB DDMMYYYY hh:mm; Listing x.xx; SDTM package: DDMMYYYY\n\n\n\n\n\n\nN: Number of subjects in the full safety analysis set, within each treatment groupn: Subjects with at least one baseline and post-baseline records\n\n\n\n\n\n\n\n\nSplit adlb_prep by multiple parameters.\nMap over count_shifts_by_visit() on the data split by parameters\nAdd percentages to numeric columns within each resulting data.frame from count_shifts_by_visit()\nCreate a function std_shift_display() to combine the {gt} table display steps and map it over on the list output retrieved from the previous step\n\n\nCode\nadlb_multi &lt;- adlb_prep |&gt;\n  filter(toupper(.data$PARAMCD) %in% c(\"PLAT\", \"HCT\", \"MCH\")) |&gt;\n  group_nest(.data$PARAM)\n\nshift_out &lt;- map(adlb_multi$data, \\(x) {\n  count_shifts_by_visit(\n    bds_dataset = x,\n    trt_var = exprs(TRT_VAR),\n    analysis_grade_var = exprs(ANRIND),\n    base_grade_var = exprs(BNRIND),\n    grade_var_order = exprs(Low, Normal, High),\n    visit_var = exprs(AVISIT, AVISITN)\n  )\n}) |&gt;\n  set_names(adlb_multi$PARAM)\n\n# add percentages\nshift_out &lt;- map(shift_out, \\(df) {\n  df |&gt;\n    add_pct2cols(\n      exclude_cols = exprs(AVISIT, ANRIND),\n      trt_bign = trt_bign\n    )\n})\n\nlist_out &lt;-\n  map(names(shift_out), \\(x) {\n    shift_out[[x]] |&gt;\n      std_shift_display(\n        param = x,\n        group_col = \"AVISIT\",\n        stub_header = \"Analysis Visit\",\n        rtf_preheader = \"Protocol: CDISCPILOT01\",\n        title = \"Table x.x&lt;br&gt;Shift Table of Lab\n        Hematology&lt;br&gt;(Full Safety Analysis Set)\",\n        footnote = \"N: Number of subjects in the full safety analysis set, within each treatment group&lt;br&gt;n: Subjects with at least one baseline and post-baseline records\",\n        sourcenote =\n          \"Source: ADLB DDMMYYYY hh:mm; Listing x.xx; SDTM package: DDMMYYYY\"\n      )\n  })\n\ngt_group(.list = list_out)\n\n\n\n\n\n  \n    \n      Table x.xShift Table of Lab\nHematology(Full Safety Analysis Set)\n    \n    \n      Parameter = Ery. Mean Corpuscular Hemoglobin (fmol(Fe))\n    \n    \n      Analysis Visit\n      ReferenceRange\n      \n        Placebo(N=86)Baselinen (%)\n      \n      \n        Xanomeline High Dose(N=72)Baselinen (%)\n      \n      \n        Xanomeline Low Dose(N=96)Baselinen (%)\n      \n    \n    \n      Low\n      Normal\n      High\n      Total\n      Low\n      Normal\n      High\n      Total\n      Low\n      Normal\n      High\n      Total\n    \n  \n  \n    Week 2\nLow\n0\n0\n0\n0\n1 (1.4%)\n0\n0\n1 (1.4%)\n0\n0\n0\n0\n    Normal\n0\n78 (90.7%)\n2 (2.3%)\n80 (93%)\n0\n63 (87.5%)\n2 (2.8%)\n65 (90.3%)\n0\n68 (70.8%)\n2 (2.1%)\n70 (72.9%)\n    High\n0\n0\n2 (2.3%)\n2 (2.3%)\n0\n0\n5 (6.9%)\n5 (6.9%)\n0\n2 (2.1%)\n1 (1%)\n3 (3.1%)\n    Total\n0\n78 (90.7%)\n4 (4.7%)\n82 (95.3%)\n1 (1.4%)\n63 (87.5%)\n7 (9.7%)\n71 (98.6%)\n0\n70 (72.9%)\n3 (3.1%)\n73 (76%)\n    Week 4\nLow\n0\n0\n0\n0\n1 (1.4%)\n0\n0\n1 (1.4%)\n0\n0\n0\n0\n    Normal\n0\n70 (81.4%)\n1 (1.2%)\n71 (82.6%)\n0\n58 (80.6%)\n1 (1.4%)\n59 (81.9%)\n0\n60 (62.5%)\n2 (2.1%)\n62 (64.6%)\n    High\n0\n2 (2.3%)\n2 (2.3%)\n4 (4.7%)\n0\n0\n6 (8.3%)\n6 (8.3%)\n0\n1 (1%)\n1 (1%)\n2 (2.1%)\n    Total\n0\n72 (83.7%)\n3 (3.5%)\n75 (87.2%)\n1 (1.4%)\n58 (80.6%)\n7 (9.7%)\n66 (91.7%)\n0\n61 (63.5%)\n3 (3.1%)\n64 (66.7%)\n    Week 6\nLow\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n    Normal\n0\n65 (75.6%)\n2 (2.3%)\n67 (77.9%)\n0\n47 (65.3%)\n1 (1.4%)\n48 (66.7%)\n0\n55 (57.3%)\n2 (2.1%)\n57 (59.4%)\n    High\n0\n2 (2.3%)\n2 (2.3%)\n4 (4.7%)\n0\n0\n6 (8.3%)\n6 (8.3%)\n0\n0\n1 (1%)\n1 (1%)\n    Total\n0\n67 (77.9%)\n4 (4.7%)\n71 (82.6%)\n0\n47 (65.3%)\n7 (9.7%)\n54 (75%)\n0\n55 (57.3%)\n3 (3.1%)\n58 (60.4%)\n  \n  \n    \n      Source: ADLB DDMMYYYY hh:mm; Listing x.xx; SDTM package: DDMMYYYY\n    \n  \n  \n    \n       N: Number of subjects in the full safety analysis set, within each treatment groupn: Subjects with at least one baseline and post-baseline records\n    \n  \n\n\n\n\n\n  \n    \n      Table x.xShift Table of Lab\nHematology(Full Safety Analysis Set)\n    \n    \n      Parameter = Hematocrit (1)\n    \n    \n      Analysis Visit\n      ReferenceRange\n      \n        Placebo(N=86)Baselinen (%)\n      \n      \n        Xanomeline High Dose(N=72)Baselinen (%)\n      \n      \n        Xanomeline Low Dose(N=96)Baselinen (%)\n      \n    \n    \n      Low\n      Normal\n      High\n      Total\n      Low\n      Normal\n      High\n      Total\n      Low\n      Normal\n      High\n      Total\n    \n  \n  \n    Week 2\nLow\n0\n0\n0\n0\n1 (1.4%)\n0\n0\n1 (1.4%)\n1 (1%)\n2 (2.1%)\n0\n3 (3.1%)\n    Normal\n3 (3.5%)\n79 (91.9%)\n0\n82 (95.3%)\n0\n66 (91.7%)\n2 (2.8%)\n68 (94.4%)\n0\n67 (69.8%)\n1 (1%)\n68 (70.8%)\n    High\n0\n0\n0\n0\n0\n1 (1.4%)\n0\n1 (1.4%)\n0\n0\n1 (1%)\n1 (1%)\n    Total\n3 (3.5%)\n79 (91.9%)\n0\n82 (95.3%)\n1 (1.4%)\n67 (93.1%)\n2 (2.8%)\n70 (97.2%)\n1 (1%)\n69 (71.9%)\n2 (2.1%)\n72 (75%)\n    Week 4\nLow\n3 (3.5%)\n0\n0\n3 (3.5%)\n0\n0\n0\n0\n1 (1%)\n2 (2.1%)\n0\n3 (3.1%)\n    Normal\n0\n71 (82.6%)\n0\n71 (82.6%)\n1 (1.4%)\n61 (84.7%)\n2 (2.8%)\n64 (88.9%)\n1 (1%)\n58 (60.4%)\n1 (1%)\n60 (62.5%)\n    High\n0\n0\n0\n0\n0\n1 (1.4%)\n0\n1 (1.4%)\n0\n0\n0\n0\n    Total\n3 (3.5%)\n71 (82.6%)\n0\n74 (86%)\n1 (1.4%)\n62 (86.1%)\n2 (2.8%)\n65 (90.3%)\n2 (2.1%)\n60 (62.5%)\n1 (1%)\n63 (65.6%)\n    Week 6\nLow\n2 (2.3%)\n1 (1.2%)\n0\n3 (3.5%)\n1 (1.4%)\n0\n0\n1 (1.4%)\n1 (1%)\n1 (1%)\n0\n2 (2.1%)\n    Normal\n0\n66 (76.7%)\n0\n66 (76.7%)\n0\n50 (69.4%)\n2 (2.8%)\n52 (72.2%)\n1 (1%)\n52 (54.2%)\n1 (1%)\n54 (56.2%)\n    High\n0\n1 (1.2%)\n0\n1 (1.2%)\n0\n1 (1.4%)\n0\n1 (1.4%)\n0\n0\n0\n0\n    Total\n2 (2.3%)\n68 (79.1%)\n0\n70 (81.4%)\n1 (1.4%)\n51 (70.8%)\n2 (2.8%)\n54 (75%)\n2 (2.1%)\n53 (55.2%)\n1 (1%)\n56 (58.3%)\n  \n  \n    \n      Source: ADLB DDMMYYYY hh:mm; Listing x.xx; SDTM package: DDMMYYYY\n    \n  \n  \n    \n       N: Number of subjects in the full safety analysis set, within each treatment groupn: Subjects with at least one baseline and post-baseline records\n    \n  \n\n\n\n\n\n  \n    \n      Table x.xShift Table of Lab\nHematology(Full Safety Analysis Set)\n    \n    \n      Parameter = Platelet (10^9/L)\n    \n    \n      Analysis Visit\n      ReferenceRange\n      \n        Placebo(N=86)Baselinen (%)\n      \n      \n        Xanomeline High Dose(N=72)Baselinen (%)\n      \n      \n        Xanomeline Low Dose(N=96)Baselinen (%)\n      \n    \n    \n      Low\n      Normal\n      High\n      Total\n      Low\n      Normal\n      High\n      Total\n      Low\n      Normal\n      High\n      Total\n    \n  \n  \n    Week 2\nLow\n0\n0\n0\n0\n1 (1.4%)\n0\n0\n1 (1.4%)\n0\n0\n0\n0\n    Normal\n0\n80 (93%)\n1 (1.2%)\n81 (94.2%)\n0\n70 (97.2%)\n0\n70 (97.2%)\n1 (1%)\n66 (68.8%)\n1 (1%)\n68 (70.8%)\n    High\n0\n0\n1 (1.2%)\n1 (1.2%)\n0\n0\n0\n0\n0\n2 (2.1%)\n0\n2 (2.1%)\n    Total\n0\n80 (93%)\n2 (2.3%)\n82 (95.3%)\n1 (1.4%)\n70 (97.2%)\n0\n71 (98.6%)\n1 (1%)\n68 (70.8%)\n1 (1%)\n70 (72.9%)\n    Week 4\nLow\n0\n0\n0\n0\n0\n0\n0\n0\n1 (1%)\n0\n0\n1 (1%)\n    Normal\n0\n72 (83.7%)\n0\n72 (83.7%)\n0\n65 (90.3%)\n0\n65 (90.3%)\n0\n61 (63.5%)\n1 (1%)\n62 (64.6%)\n    High\n0\n0\n2 (2.3%)\n2 (2.3%)\n0\n0\n0\n0\n0\n0\n0\n0\n    Total\n0\n72 (83.7%)\n2 (2.3%)\n74 (86%)\n0\n65 (90.3%)\n0\n65 (90.3%)\n1 (1%)\n61 (63.5%)\n1 (1%)\n63 (65.6%)\n    Week 6\nLow\n0\n0\n0\n0\n0\n0\n0\n0\n1 (1%)\n0\n0\n1 (1%)\n    Normal\n0\n69 (80.2%)\n1 (1.2%)\n70 (81.4%)\n0\n53 (73.6%)\n0\n53 (73.6%)\n0\n56 (58.3%)\n1 (1%)\n57 (59.4%)\n    High\n0\n0\n1 (1.2%)\n1 (1.2%)\n0\n0\n0\n0\n0\n0\n0\n0\n    Total\n0\n69 (80.2%)\n2 (2.3%)\n71 (82.6%)\n0\n53 (73.6%)\n0\n53 (73.6%)\n1 (1%)\n56 (58.3%)\n1 (1%)\n58 (60.4%)\n  \n  \n    \n      Source: ADLB DDMMYYYY hh:mm; Listing x.xx; SDTM package: DDMMYYYY\n    \n  \n  \n    \n       N: Number of subjects in the full safety analysis set, within each treatment groupn: Subjects with at least one baseline and post-baseline records",
    "crumbs": [
      "Shift Table in R"
    ]
  },
  {
    "objectID": "shift.html#saving-the-table",
    "href": "shift.html#saving-the-table",
    "title": "Creating a Shift Table in R",
    "section": "Saving the Table",
    "text": "Saving the Table\n\n\nCode\n# as rtf\ngtsave(out, \"adlb_rxxxx_20240428.rtf\", \"path to the output directory\")\n# as pdf\ngtsave(out, \"adlb_rxxxx_20240428.pdf\", \"path to the output directory\")\n# as word\ngtsave(out, \"adlb_rxxxx_20240428.docx\", \"path to the output directory\")\n# as html\ngtsave(out, \"adlb_rxxxx_20240428.html\", \"path to the output directory\")",
    "crumbs": [
      "Shift Table in R"
    ]
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "This project is an entry for Posit 2024 Table Contest. An alternative link to the website is available here.\nReferences\n\nICH E3 Structure and Content of Clinical Study Report\nAn Effective way to produce a Shift Table\nProducing Clinical Laboratory Shift Tables From ADaM Data\nTables in Clinical Trial with R\nTidy Design Principles\nThe Design Philosophy of Great Tables\n\nR Packages Used\n\ndplyr\ntidyr\npurrr\nstringr\nrlang\ngt\nhere\npharmaverseadam\nDT (to display intermediate datasets)\n\nThe hex sticker of the website was made using hexmake\nSession Info\n\n\nCode\nsessioninfo::session_info(\"installed\")\n\n\n─ Session info ───────────────────────────────────────────────────────────────\n setting  value\n version  R version 4.3.2 (2023-10-31 ucrt)\n os       Windows 11 x64 (build 22621)\n system   x86_64, mingw32\n ui       RTerm\n language (EN)\n collate  English_United Kingdom.utf8\n ctype    English_United Kingdom.utf8\n tz       Asia/Calcutta\n date     2024-04-30\n pandoc   3.1.1 @ C:/Program Files/RStudio/resources/app/bin/quarto/bin/tools/ (via rmarkdown)\n\n─ Packages ───────────────────────────────────────────────────────────────────\n ! package         * version  date (UTC) lib source\n   AsioHeaders       1.22.1-2 2022-12-08 [1] RSPM (R 4.3.0)\n   base64enc         0.1-3    2015-07-28 [1] RSPM (R 4.3.0)\n   bigD              0.2.0    2022-09-05 [1] RSPM (R 4.3.0)\n   bitops            1.0-7    2021-04-24 [1] RSPM (R 4.3.0)\n   boot              1.3-28.1 2022-11-22 [2] CRAN (R 4.3.2)\n   bslib             0.7.0    2024-03-29 [1] CRAN (R 4.3.3)\n   cachem            1.0.8    2023-05-01 [1] RSPM (R 4.3.0)\n   callr             3.7.6    2024-03-25 [1] RSPM (R 4.3.0)\n   chromote          0.2.0    2024-02-12 [1] RSPM (R 4.3.0)\n   class             7.3-22   2023-05-03 [2] CRAN (R 4.3.2)\n P cli               3.6.2    2023-12-11 [?] RSPM (R 4.3.0)\n   cluster           2.1.4    2022-08-22 [2] CRAN (R 4.3.2)\n   codetools         0.2-19   2023-02-01 [2] CRAN (R 4.3.2)\n   colorspace        2.1-0    2023-01-23 [1] RSPM (R 4.3.0)\n   commonmark        1.9.1    2024-01-30 [1] CRAN (R 4.3.3)\n   cpp11             0.4.7    2023-12-02 [1] RSPM (R 4.3.0)\n   crosstalk         1.2.1    2023-11-23 [1] CRAN (R 4.3.2)\n   curl              5.2.1    2024-03-01 [1] RSPM\n P digest            0.6.35   2024-03-11 [?] CRAN (R 4.3.3)\n   dplyr             1.1.4    2023-11-17 [1] RSPM (R 4.3.0)\n   DT                0.33     2024-04-04 [1] RSPM (R 4.3.0)\n P evaluate          0.23     2023-11-01 [?] RSPM (R 4.3.0)\n   fansi             1.0.6    2023-12-08 [1] RSPM (R 4.3.0)\n   farver            2.1.1    2022-07-06 [1] RSPM (R 4.3.0)\n P fastmap           1.1.1    2023-02-24 [?] RSPM (R 4.3.0)\n   fontawesome       0.5.2    2023-08-19 [1] RSPM (R 4.3.0)\n   foreign           0.8-85   2023-09-09 [2] CRAN (R 4.3.2)\n   fs                1.6.3    2023-07-20 [1] RSPM (R 4.3.0)\n   generics          0.1.3    2022-07-05 [1] RSPM (R 4.3.0)\n   glue              1.7.0    2024-01-09 [1] CRAN (R 4.3.3)\n   gt                0.10.1   2024-01-17 [1] RSPM (R 4.3.0)\n   here              1.0.1    2020-12-13 [1] RSPM (R 4.3.0)\n   highr             0.10     2022-12-22 [1] RSPM (R 4.3.0)\n   hms               1.1.3    2023-03-21 [1] RSPM (R 4.3.0)\n P htmltools         0.5.8.1  2024-04-04 [?] CRAN (R 4.3.3)\n P htmlwidgets       1.6.4    2023-12-06 [?] RSPM (R 4.3.0)\n   httpuv            1.6.15   2024-03-26 [1] CRAN (R 4.3.3)\n   janitor           2.2.0    2023-02-02 [1] RSPM (R 4.3.0)\n   jquerylib         0.1.4    2021-04-26 [1] RSPM (R 4.3.0)\n P jsonlite          1.8.8    2023-12-04 [?] RSPM (R 4.3.0)\n   juicyjuice        0.1.0    2022-11-10 [1] RSPM (R 4.3.0)\n   KernSmooth        2.23-22  2023-07-10 [2] CRAN (R 4.3.2)\n P knitr             1.46     2024-04-06 [?] RSPM (R 4.3.0)\n   labeling          0.4.3    2023-08-29 [1] RSPM (R 4.3.0)\n   later             1.3.2    2023-12-06 [1] RSPM (R 4.3.0)\n   lattice           0.21-9   2023-10-01 [2] CRAN (R 4.3.2)\n   lazyeval          0.2.2    2019-03-15 [1] CRAN (R 4.3.2)\n   lifecycle         1.0.4    2023-11-07 [1] RSPM (R 4.3.0)\n   lubridate         1.9.3    2023-09-27 [1] CRAN (R 4.3.2)\n   magrittr          2.0.3    2022-03-30 [1] RSPM (R 4.3.0)\n   markdown          1.12     2023-12-06 [1] RSPM (R 4.3.0)\n   MASS              7.3-60   2023-05-04 [2] CRAN (R 4.3.2)\n   Matrix            1.6-1.1  2023-09-18 [2] CRAN (R 4.3.2)\n   memoise           2.0.1    2021-11-26 [1] RSPM (R 4.3.0)\n   mgcv              1.9-0    2023-07-11 [2] CRAN (R 4.3.2)\n   mime              0.12     2021-09-28 [1] RSPM (R 4.3.0)\n   munsell           0.5.1    2024-04-01 [1] CRAN (R 4.3.3)\n   nlme              3.1-163  2023-08-09 [2] CRAN (R 4.3.2)\n   nnet              7.3-19   2023-05-03 [2] CRAN (R 4.3.2)\n   pharmaverseadam   0.2.0    2024-01-08 [1] RSPM (R 4.3.0)\n   pillar            1.9.0    2023-03-22 [1] RSPM (R 4.3.0)\n   pkgconfig         2.0.3    2019-09-22 [1] RSPM (R 4.3.0)\n   processx          3.8.4    2024-03-16 [1] RSPM (R 4.3.0)\n   promises          1.3.0    2024-04-05 [1] RSPM (R 4.3.0)\n   ps                1.7.6    2024-01-18 [1] CRAN (R 4.3.3)\n   purrr             1.0.2    2023-08-10 [1] RSPM (R 4.3.0)\n   quarto            1.4      2024-03-06 [1] RSPM (R 4.3.0)\n   R.cache           0.16.0   2022-07-21 [1] CRAN (R 4.3.2)\n   R.methodsS3       1.8.2    2022-06-13 [1] CRAN (R 4.3.1)\n   R.oo              1.26.0   2024-01-24 [1] RSPM\n   R.utils           2.12.3   2023-11-18 [1] CRAN (R 4.3.2)\n   R6                2.5.1    2021-08-19 [1] RSPM (R 4.3.0)\n   rappdirs          0.3.3    2021-01-31 [1] RSPM (R 4.3.0)\n   RColorBrewer      1.1-3    2022-04-03 [1] RSPM (R 4.3.0)\n   Rcpp              1.0.12   2024-01-09 [1] CRAN (R 4.3.3)\n   reactable         0.4.4    2023-03-12 [1] RSPM (R 4.3.0)\n   reactR            0.5.0    2023-10-11 [1] RSPM (R 4.3.0)\n   renv              0.16.0   2022-09-29 [1] CRAN (R 4.3.2)\n P rlang             1.1.3    2024-01-10 [?] CRAN (R 4.3.3)\n P rmarkdown         2.26     2024-03-05 [?] CRAN (R 4.3.3)\n   rpart             4.1.21   2023-10-09 [2] CRAN (R 4.3.2)\n   rprojroot         2.0.4    2023-11-05 [1] RSPM (R 4.3.0)\n P rstudioapi        0.16.0   2024-03-24 [?] RSPM (R 4.3.0)\n   sass              0.4.9    2024-03-15 [1] CRAN (R 4.3.3)\n   scales            1.3.0    2023-11-28 [1] RSPM (R 4.3.0)\n P sessioninfo       1.2.2    2021-12-06 [?] RSPM (R 4.3.0)\n   snakecase         0.11.1   2023-08-27 [1] RSPM (R 4.3.0)\n   spatial           7.3-17   2023-07-20 [2] CRAN (R 4.3.2)\n   stringi           1.8.3    2023-12-11 [1] RSPM (R 4.3.0)\n   stringr           1.5.1    2023-11-14 [1] RSPM (R 4.3.0)\n   styler            1.10.3   2024-04-07 [1] RSPM\n   survival          3.5-7    2023-08-14 [2] CRAN (R 4.3.2)\n   tibble            3.2.1    2023-03-20 [1] RSPM (R 4.3.0)\n   tidyr             1.3.1    2024-01-24 [1] CRAN (R 4.3.3)\n   tidyselect        1.2.1    2024-03-11 [1] CRAN (R 4.3.3)\n   timechange        0.3.0    2024-01-18 [1] RSPM (R 4.3.0)\n   tinytex           0.50     2024-03-16 [1] CRAN (R 4.3.3)\n   utf8              1.2.4    2023-10-22 [1] RSPM (R 4.3.0)\n   V8                4.4.2    2024-02-15 [1] CRAN (R 4.3.3)\n   vctrs             0.6.5    2023-12-01 [1] RSPM (R 4.3.0)\n   viridisLite       0.4.2    2023-05-02 [1] RSPM (R 4.3.0)\n   webshot2          0.1.1    2023-08-11 [1] RSPM (R 4.3.0)\n   websocket         1.4.1    2021-08-18 [1] RSPM (R 4.3.0)\n   withr             3.0.0    2024-01-16 [1] CRAN (R 4.3.3)\n P xfun              0.43     2024-03-25 [?] CRAN (R 4.3.3)\n   xml2              1.3.6    2023-12-04 [1] RSPM (R 4.3.0)\n P yaml              2.3.8    2023-12-11 [?] RSPM (R 4.3.0)\n\n [1] C:/Users/amrut/Documents/shifter/renv/library/R-4.3/x86_64-w64-mingw32\n [2] C:/Users/amrut/AppData/Local/Temp/Rtmp0cuDCy/renv-system-library\n\n P ── Loaded and on-disk path mismatch.\n\n──────────────────────────────────────────────────────────────────────────────\n\n\n\n\n\n Back to top",
    "crumbs": [
      "About"
    ]
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Tidy Shift Tables in R",
    "section": "",
    "text": "A shift table is a table that displays the number of subjects in different ranges (e.g. low, normal, or high) at baseline and then shift or transition at selected time points or time intervals. The purpose of the shift table is to illustrate the progress of change from baseline and help to make reasonable inference.",
    "crumbs": [
      "Introduction"
    ]
  },
  {
    "objectID": "index.html#what-is-a-shift-table",
    "href": "index.html#what-is-a-shift-table",
    "title": "Tidy Shift Tables in R",
    "section": "",
    "text": "A shift table is a table that displays the number of subjects in different ranges (e.g. low, normal, or high) at baseline and then shift or transition at selected time points or time intervals. The purpose of the shift table is to illustrate the progress of change from baseline and help to make reasonable inference.",
    "crumbs": [
      "Introduction"
    ]
  },
  {
    "objectID": "index.html#shift-tables-in-clinical-trials",
    "href": "index.html#shift-tables-in-clinical-trials",
    "title": "Tidy Shift Tables in R",
    "section": "Shift Tables in Clinical Trials",
    "text": "Shift Tables in Clinical Trials\nIt is important to look at the effect of the drug by comparing values at baseline and post-baseline in any clinical trials. Shift Table is one of the analysis methods suggested in ICH E3 Guidelines to show the number of patients who are low, normal, or high at baseline and at selected time intervals. It is easier to figure out any abnormality in data because the layout helps to get the count of subjects at two time points simultaneously. It can be used to analyze any data like laboratory records, vital signs, ECG etc.",
    "crumbs": [
      "Introduction"
    ]
  },
  {
    "objectID": "index.html#shift-table-for-laboratory-records",
    "href": "index.html#shift-table-for-laboratory-records",
    "title": "Tidy Shift Tables in R",
    "section": "Shift Table for Laboratory Records",
    "text": "Shift Table for Laboratory Records\nAll safety related data is collected in a clinical trial study for safety analysis. The laboratory data is one of the most important assessments for safety consideration.\nThere are several summary tables commonly used to present laboratory results viz descriptive statistics, CTCAE summaries and shift tables are some of the most widely used ones. The shift table is one of the most frequently requested outputs in a clinical trial by statisticians or clinicians.\nFigure 1 represents a SAS generated Shift Table showing the number of subjects with low, normal, or high Hemoglobin records at baseline and post-dose together.\n\n\n\nFigure 1",
    "crumbs": [
      "Introduction"
    ]
  }
]